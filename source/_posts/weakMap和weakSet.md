---
title: weakMap和weakSet
tags:
categories:
  - js中的api
---

### 一、为什么要有weakMap和weakSet

  帮助管理内存的数据结构

### 二、和map、set区别

  1、weakMap和weakSet键只能是对象或者symbol,因此他们设计的初衷是为了解决对象引用导致的内存泄漏问题；在这两种数据结构中，键都是弱引用，
  键值的引用不会阻止被引用对象被垃圾回收机制清除；如果键是基本数据类型，在weakMap和weakSet中会引发错误，因此基本数据类型不会被视为弱引用，也不会出发垃圾回收

### 三、什么场合下使用

  需要弱引用的场合，比如键值是对象并且想在没有使用时自动被垃圾回收机制回收的数据，比如私有数据、缓存

### 四、垃圾回收机制

  引用计数法
  标记清除法（目前大部分使用，是对引用计数法的一个优化）
